/**
 * Checks if a Point2D.Double is inside the figure.
 */
public boolean contains(Point2D.Double p) {
    if ((AttributeKeys.TRANSFORM.get(this)) != null) {
        try {
            p = ((Point2D.Double) (AttributeKeys.TRANSFORM.get(this).inverseTransform(p, new Point2D.Double())));
        } catch (NoninvertibleTransformException ex) {
            ex.printStackTrace();
        }
    }
    Rectangle2D r = getTextShape().getBounds2D();
    return r.isEmpty() ? getBounds().contains(p) : r.contains(p);
}