/**
 * Paints the contents of the window used for dragging.
 *
 * @param g
 * 		Graphics to paint to.
 * @throws NullPointerException
 * 		is <code>g</code> is null
 * @since 1.5
 */
protected void paintDragWindow(Graphics g) {
    int w = dragWindow.getWidth();
    int h = dragWindow.getHeight();
    g.setColor(dragWindow.getBackground());
    g.fillRect(0, 0, w, h);
    boolean wasDoubleBuffered = false;
    if (toolBar.isDoubleBuffered()) {
        wasDoubleBuffered = true;
        toolBar.setDoubleBuffered(false);
    }
    Graphics g2 = g.create();
    toolBar.paintAll(g2);
    g2.dispose();
    g.setColor(dragWindow.getBorderColor());
    g.drawRect(0, 0, (w - 1), (h - 1));
    if (wasDoubleBuffered) {
        toolBar.setDoubleBuffered(true);
    }
}