/**
 * The Tool uses the InputMap to determine what to do, when a key is pressed.
 * If the corresponding value of the InputMap is a String, the ActionMap
 * of the tool is used, to find the action to be performed.
 * If the corresponding value of the InputMap is a ActionListener, the
 * actionPerformed method of the ActionListener is performed.
 */
public void keyPressed(KeyEvent evt) {
    if (!(evt.isConsumed())) {
        if ((evt.getSource()) instanceof Container) {
            editor.setActiveView(editor.findView(((Container) (evt.getSource()))));
        }
        if ((inputMap) != null) {
            Object obj = inputMap.get(KeyStroke.getKeyStroke(evt.getKeyCode(), evt.getModifiers(), false));
            ActionListener al = null;
            if (obj instanceof ActionListener) {
                al = ((ActionListener) (obj));
            } else
                if ((obj != null) && ((actionMap) != null)) {
                    al = actionMap.get(obj);
                }

            if (al != null) {
                evt.consume();
                al.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, "tool", evt.getWhen(), evt.getModifiers()));
                fireToolDone();
            }
        }
    }
}