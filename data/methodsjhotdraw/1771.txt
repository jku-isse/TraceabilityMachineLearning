/**
 * MouseListener method for mousePressed events. If the popup trigger has
 * been activated, then the appropriate hook method is called.
 */
public void mousePressed(final MouseEvent evt) {
    if ((popupTimer) != null) {
        popupTimer.stop();
        popupTimer = null;
    }
    // XXX - When we want to support multiple views, we have to
    // implement this:
    // setView((DrawingView)e.getSource());
    isMousePressedPopupTrigger = evt.isPopupTrigger();
    if (isMousePressedPopupTrigger) {
        getView().requestFocus();
        handlePopupMenu(evt);
    } else {
        super.mousePressed(evt);
        popupTimer = new Timer(1000, new ActionListener() {
            public void actionPerformed(ActionEvent aevt) {
                handlePopupMenu(evt);
                popupTimer = null;
            }
        });
        popupTimer.setRepeats(false);
        popupTimer.start();
    }
}