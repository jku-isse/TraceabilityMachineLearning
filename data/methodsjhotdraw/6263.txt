/**
 * Undoes the last edit event.
 * The UndoRedoManager ignores all incoming UndoableEdit events,
 * while undo is in progress.
 */
public void undo() throws CannotUndoException {
    undoOrRedoInProgress = true;
    try {
        super.undo();
    } finally {
        undoOrRedoInProgress = false;
        updateActions();
    }
}