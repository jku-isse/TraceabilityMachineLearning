/**
 * This method is invoked before the rendered image of the figure is
 * composited.
 */
public void drawFigure(Graphics2D g) {
    AffineTransform savedTransform = null;
    if ((AttributeKeys.TRANSFORM.get(this)) != null) {
        savedTransform = g.getTransform();
        g.transform(AttributeKeys.TRANSFORM.get(this));
    }
    Paint paint = SVGAttributeKeys.getFillPaint(this);
    if (paint != null) {
        g.setPaint(paint);
        drawFill(g);
    }
    paint = SVGAttributeKeys.getStrokePaint(this);
    if ((paint != null) && ((AttributeKeys.STROKE_WIDTH.get(this)) > 0)) {
        g.setPaint(paint);
        g.setStroke(SVGAttributeKeys.getStroke(this));
        drawStroke(g);
    }
    if ((AttributeKeys.TRANSFORM.get(this)) != null) {
        g.setTransform(savedTransform);
    }
}