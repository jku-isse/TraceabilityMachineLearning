/**
 * Constructs a {@link Base64.InputStream} in
 * either ENCODE or DECODE mode.
 * <p>
 * Valid options:<pre>
 *   ENCODE or DECODE: Encode or Decode as data is read.
 *   DONT_BREAK_LINES: dont break lines at 76 characters
 *     (only meaningful when encoding)
 *     <i>Note: Technically, this makes your encoding non-compliant.</i>
 * </pre>
 * <p>
 * Example: <code>new Base64.InputStream( in, Base64.DECODE )</code>
 *
 * @param in
 * 		the <tt>java.io.InputStream</tt> from which to read data.
 * @param options
 * 		Specified options
 * @see Base64#ENCODE
 * @see Base64#DECODE
 * @see Base64#DONT_BREAK_LINES
 * @since 2.0
 */
// end constructor
public InputStream(InputStream in, int options) {
    super(in);
    this.breakLines = (options & (Base64.DONT_BREAK_LINES)) != (Base64.DONT_BREAK_LINES);
    this.encode = (options & (Base64.ENCODE)) == (Base64.ENCODE);
    this.bufferLength = (encode) ? 4 : 3;
    this.buffer = new byte[bufferLength];
    this.position = -1;
    this.lineLength = 0;
}