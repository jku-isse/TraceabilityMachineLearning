protected void openFile(JFileChooser fileChooser, final View view) {
    final Application app = getApplication();
    final File file = fileChooser.getSelectedFile();
    app.setEnabled(true);
    view.setEnabled(false);
    // If there is another view with we set the multiple open
    // id of our view to max(multiple open id) + 1.
    int multipleOpenId = 1;
    for (View aView : app.views()) {
        if (((aView != view) && ((aView.getFile()) != null)) && (aView.getFile().equals(file))) {
            multipleOpenId = Math.max(multipleOpenId, ((aView.getMultipleOpenId()) + 1));
        }
    }
    view.setMultipleOpenId(multipleOpenId);
    view.setEnabled(false);
    // Open the file
    view.execute(new Worker() {
        public Object construct() {
            try {
                if (file.exists()) {
                    view.read(file);
                    return null;
                } else {
                    ResourceBundleUtil labels = ResourceBundleUtil.getBundle("org.jhotdraw.app.Labels");
                    return new IOException(labels.getFormatted("file.open.fileDoesNotExist.message", file.getName()));
                }
            } catch (Throwable e) {
                return e;
            }
        }

        public void finished(Object value) {
            fileOpened(view, file, value);
        }
    });
}