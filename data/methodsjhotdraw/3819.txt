/**
 * Updates the text of the field from the value.
 */
protected void updateText() {
    if (((updatingDepth)++) == 0) {
        if ((getFormatter()) != null) {
            try {
                String newText = getFormatter().valueToString(getValue());
                setText(newText);
                if (!(isFocusOwner())) {
                    // This is like selectAll(), but we set the
                    // cursor at the start of the field, because
                    // the start of the field contains the most
                    // significant part of the field content.
                    setCaretPosition(getDocument().getLength());
                    moveCaretPosition(0);
                }
            } catch (ParseException ex) {
                // ex.printStackTrace(); do nothing
            }
        }
    }
    (updatingDepth)--;
}