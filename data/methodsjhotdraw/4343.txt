/**
 * Draw a string with the graphics <code>g</code> at location
 * (<code>x</code>, <code>y</code>)
 * just like <code>g.drawString</code> would.
 * The character at index <code>underlinedIndex</code>
 * in text will be underlined. If <code>index</code> is beyond the
 * bounds of <code>text</code> (including < 0), nothing will be
 * underlined.
 *
 * @param g
 * 		Graphics to draw with
 * @param text
 * 		String to draw
 * @param underlinedIndex
 * 		Index of character in text to underline
 * @param x
 * 		x coordinate to draw at
 * @param y
 * 		y coordinate to draw at
 * @since 1.4
 */
public static void drawStringUnderlineCharAt(Graphics g, String text, int underlinedIndex, int x, int y) {
    g.drawString(text, x, y);
    if ((underlinedIndex >= 0) && (underlinedIndex < (text.length()))) {
        FontMetrics fm = g.getFontMetrics();
        int underlineRectX = x + (fm.stringWidth(text.substring(0, underlinedIndex)));
        int underlineRectY = y;
        int underlineRectWidth = fm.charWidth(text.charAt(underlinedIndex));
        int underlineRectHeight = 1;
        g.fillRect(underlineRectX, ((underlineRectY + (fm.getDescent())) - 1), underlineRectWidth, underlineRectHeight);
    }
}