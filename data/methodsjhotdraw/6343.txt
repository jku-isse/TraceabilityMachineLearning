/**
 * Installs a JTabbedPane preferences handler.
 * On first run, sets the JTabbedPane to its preferred tab.
 *
 * @param prefs
 * 		Preferences for storing/retrieving preferences values.
 * @param name
 * 		Base name of the preference.
 * @param tabbedPane
 * 		The JTabbedPane for which to track preferences.
 */
public static void installTabbedPanePrefsHandler(final Preferences prefs, final String name, final JTabbedPane tabbedPane) {
    int selectedTab = prefs.getInt(name, 0);
    try {
        tabbedPane.setSelectedIndex(selectedTab);
    } catch (IndexOutOfBoundsException e) {
    }
    tabbedPane.addChangeListener(new ChangeListener() {
        public void stateChanged(ChangeEvent e) {
            prefs.putInt(name, tabbedPane.getSelectedIndex());
        }
    });
}