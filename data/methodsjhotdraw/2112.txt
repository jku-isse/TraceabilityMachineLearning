public double rotateAngle(double angle, RotationDirection dir) {
    // Check parameters
    if (dir == null) {
        throw new IllegalArgumentException("dir must not be null");
    }
    // Rotate into the specified direction by theta
    angle = constrainAngle(angle);
    switch (dir) {
        case CLOCKWISE :
            angle += theta;
            break;
        case COUNTER_CLOCKWISE :
        default :
            angle -= theta;
            break;
    }
    return angle;
}