/**
 * Implementation note: Sorting can not be done for orphaned children.
 */
public List<Figure> sort(Collection<Figure> c) {
    ensureSorted();
    ArrayList<Figure> sorted = new ArrayList<Figure>(c.size());
    for (Figure f : children) {
        if (c.contains(f)) {
            sorted.add(f);
        }
    }
    return sorted;
}