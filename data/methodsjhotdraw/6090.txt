/**
 * Translates an offset into the components text to a
 * line number.
 *
 * @param offset
 * 		the offset >= 0
 * @return the line number >= 0
 * @exception BadLocationException thrown if the offset is
less than zero or greater than the document length.
 */
public int getLineOfOffset(int offset) throws BadLocationException {
    Document doc = getDocument();
    if (offset < 0) {
        throw new BadLocationException("Cant translate offset to line", (-1));
    } else
        if (offset > (doc.getLength())) {
            throw new BadLocationException("Cant translate offset to line", ((doc.getLength()) + 1));
        } else {
            Element map = getDocument().getDefaultRootElement();
            return map.getElementIndex(offset);
        }

}