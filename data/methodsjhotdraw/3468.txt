/**
 * Caps the line defined by p1 and p2 by the number of units
 * specified by radius.
 *
 * @return A new end point for the line.
 */
public static Point2D.Double cap(Point2D.Double p1, Point2D.Double p2, double radius) {
    double angle = ((Math.PI) / 2) - (Math.atan2(((p2.x) - (p1.x)), ((p2.y) - (p1.y))));
    Point2D.Double p3 = new Point2D.Double(((p2.x) + (radius * (Math.cos(angle)))), ((p2.y) + (radius * (Math.sin(angle)))));
    return p3;
}