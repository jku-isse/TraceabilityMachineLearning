/**
 * Ensures that the children are sorted in z-order sequence from back to
 * front.
 */
private void ensureSorted() {
    if (needsSorting) {
        Collections.sort(children, FigureLayerComparator.INSTANCE);
        needsSorting = false;
    }
}