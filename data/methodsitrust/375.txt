/**
 * Super class validates the patient id
 *
 * @param factory
 * 		The DAOFactory to be used in creating DAOs for this action.
 * @param loggedInMID
 * 		The MID of the currently logged in user who is authorizing this action.
 * @param pidString
 * 		The MID of the patient whose personal health records are being added.
 * @throws iTrustException
 * 		
 * @throws DBException
 * 		
 * @throws NoHealthRecordsException
 * 		
 */
public EditPHRAction(DAOFactory factory, long loggedInMID, String pidString) throws DBException, iTrustException {
    super(factory, pidString);
    this.patientDAO = factory.getPatientDAO();
    this.allergyDAO = factory.getAllergyDAO();
    this.familyDAO = factory.getFamilyDAO();
    this.hrDAO = factory.getHealthRecordsDAO();
    this.ovDAO = factory.getOfficeVisitDAO();
    this.icdDAO = factory.getICDCodesDAO();
    this.personnelDAO = factory.getPersonnelDAO();
    this.HCPUAP = personnelDAO.getPersonnel(loggedInMID);
    this.patient = patientDAO.getPatient(pid);
    this.procDAO = factory.getProceduresDAO();
    this.ndcodesDAO = factory.getNDCodesDAO();// NEW

    emailutil = new EmailUtil(factory);
    this.factory = factory;
}