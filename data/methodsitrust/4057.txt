public void testAddAllergyFutRX() throws Exception {
    WebConversation wc = login("9000000000", "pw");
    // Logs in as Kelly Doctor
    WebResponse wr = wc.getCurrentPage();
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 9000000000L, 0L, "");
    wr = wr.getLinkWith("All Patients").click();
    assertEquals("iTrust - View All Patients", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.PATIENT_LIST_VIEW, 9000000000L, 0L, "");
    wr = wr.getLinkWith("Anakin Skywalker").click();
    // Select Anakin Skywalker, this seemed to be easier than what the acceptance tests did.
    assertEquals("iTrust - Edit Personal Health Record", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.PATIENT_HEALTH_INFORMATION_VIEW, 9000000000L, 100L, "");
    /* Since we dont worry about preconditions and it takes us straight to
    the correct page anyway, we can skip a lot of stuff here.
     */
    WebForm form = wr.getForms()[0];
    form = wr.getFormWithName("AddAllergy");
    form.setParameter("description", "483012382");
    form.submit();
    // Add M-minene Allergy (will be firstFound on todays date)
    wr = wc.getCurrentPage();
    assertTrue(wr.getText().contains("Medication 483012382 - Midichlominene is currently prescribed to Anakin Skywalker."));
    // This is the error that should appear when this allergy is added.
    iTrustHTTPTest.assertLogged(TransactionType.PATIENT_HEALTH_INFORMATION_EDIT, 9000000000L, 100L, "");
}