public void testEditAppt() throws Exception {
    List<ApptBean> appts = viewAction.getAllMyAppointments();
    ApptBean orig = appts.get(0);
    ApptBean b = new ApptBean();
    b.setApptID(orig.getApptID());
    b.setDate(orig.getDate());
    b.setApptType(orig.getApptType());
    b.setHcp(orig.getHcp());
    b.setPatient(orig.getPatient());
    b.setComment("New comment!");
    String s = editAction.editAppt(b, true);
    assertTrue(s.contains("The scheduled date of this appointment"));
    assertTrue(s.contains("has already passed"));
    Date d = new Date();
    boolean changed = false;
    for (ApptBean aBean : appts) {
        b = new ApptBean();
        b.setApptID(aBean.getApptID());
        b.setDate(aBean.getDate());
        b.setApptType(aBean.getApptType());
        b.setHcp(aBean.getHcp());
        b.setPatient(aBean.getPatient());
        b.setComment("New comment!");
        d.setTime(aBean.getDate().getTime());
        if (d.after(new Date())) {
            s = editAction.editAppt(b, true);
            // assertTrue(s.contains("Success: Appointment changed"));
            assertEquals("Success: Appointment changed", s);
            changed = true;
            break;
        }
    }
    if (!changed)
        fail();

}