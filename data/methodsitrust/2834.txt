public List<ApptBean> getAllHCPConflictsForAppt(long mid, ApptBean appt) throws SQLException {
    int duration = apptTypeDAO.getApptType(appt.getApptType()).getDuration();
    Connection conn = null;
    PreparedStatement ps = null;
    conn = factory.getConnection();
    ps = conn.prepareStatement(("SELECT * " + (((((("FROM appointment a, appointmenttype type "// and the corresponding types
     + "WHERE a.appt_type=type.appt_type AND ")// match them with types
     + "((DATE_ADD(a.sched_date, INTERVAL type.duration MINUTE)>? AND ")// a1 ends after a2 starts AND
     + "a.sched_date<=?) OR ")// a1 starts before a2 OR
     + "(DATE_ADD(?, INTERVAL ? MINUTE)>a.sched_date AND ")// a2 ends after a1 starts AND
     + "?<=a.sched_date)) AND ")// a2 starts before a1 starts
     + "a.doctor_id=? AND a.appt_id!=?;")));
    ps.setTimestamp(1, appt.getDate());
    ps.setTimestamp(2, appt.getDate());
    ps.setTimestamp(3, appt.getDate());
    ps.setInt(4, duration);
    ps.setTimestamp(5, appt.getDate());
    ps.setLong(6, mid);
    ps.setInt(7, appt.getApptID());
    ResultSet rs = ps.executeQuery();
    List<ApptBean> conflictList = this.abloader.loadList(rs);
    DBUtil.closeConnection(conn, ps);
    return conflictList;
}