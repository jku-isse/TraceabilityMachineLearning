/**
 * Updates an existing lab procedure.
 *
 * @param b
 * 		The LabProcedureBean representing the procedure to be updated.
 * @throws DBException
 * 		
 */
public void updateLabProcedure(LabProcedureBean b) throws DBException {
    Connection conn = null;
    PreparedStatement ps = null;
    try {
        if ((b.getPid()) == 0L)
            throw new SQLException("PatientMID cannot be null");

        conn = factory.getConnection();
        ps = conn.prepareStatement(("UPDATE labprocedure SET " + (((" Status = ?, Commentary = ?, Results = ?, UpdatedDate = ?, " + " LabTechID = ?, PriorityCode = ? , NumericalResults = ?, ") + " LowerBound = ?, UpperBound = ? ") + " WHERE LaboratoryProcedureID=?")));
        ps.setString(1, b.getStatus());
        ps.setString(2, b.getCommentary());
        ps.setString(3, b.getResults());
        ps.setTimestamp(4, new Timestamp(System.currentTimeMillis()));
        ps.setLong(5, b.getLTID());
        ps.setInt(6, b.getPriorityCode());
        ps.setString(7, b.getNumericalResult());
        ps.setString(8, b.getLowerBound());
        ps.setString(9, b.getUpperBound());
        ps.setLong(10, b.getProcedureID());
        ps.executeUpdate();
    } catch (SQLException e) {
        e.printStackTrace();
        throw new DBException(e);
    } finally {
        DBUtil.closeConnection(conn, ps);
    }
}