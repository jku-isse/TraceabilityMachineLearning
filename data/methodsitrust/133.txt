/**
 * Tests adding a new HCP
 *
 * @throws Exception
 * 		
 */
public void testAddHCP() throws Exception {
    // Step 2. For each test, set up the expectations of what will be called (started in initMocks)
    expect(ActionTestWithMocks.personnelDAO.addEmptyPersonnel(Role.HCP)).andReturn(56L).once();
    ActionTestWithMocks.personnelDAO.editPersonnel(personnel);
    expectLastCall().once();
    // Step 3. Exit recording mode, go into playback mode
    ActionTestWithMocks.control.replay();// Dont forget this!

    // Step 3. Actually run the method under test, checking its return value
    action = new AddHCPAction(ActionTestWithMocks.factory, 9000000000L);// this lines needs to be AFTER the replay()

    long newMID = action.add(personnel);
    assertEquals(56L, newMID);
    // Step 4. Verify the mocks were hit as you expected
    ActionTestWithMocks.control.verify();// Dont forget this!

}