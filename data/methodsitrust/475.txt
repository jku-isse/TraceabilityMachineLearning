public void testAddPrescription_Interaction() throws Exception {
    action = new EditPrescriptionsAction(factory, 9000000000L, "100", "1093");
    PrescriptionBean pres = new PrescriptionBean();
    pres.setDosage(50);
    pres.setInstructions("Take it");
    pres.setStartDateStr("01/31/2111");
    pres.setEndDateStr("02/12/2111");
    // Nexium, which interacts with aspirin
    MedicationBean med = factory.getNDCodesDAO().getNDCode("01864020");
    pres.setMedication(med);
    pres.setVisitID(1093);
    PrescriptionBean pres2 = new PrescriptionBean();
    pres2.setDosage(50);
    pres2.setInstructions("Take it too");
    pres2.setStartDateStr("01/31/2111");
    pres2.setEndDateStr("02/12/2111");
    // aspirin, which interacts with nexium
    MedicationBean med2 = factory.getNDCodesDAO().getNDCode("081096");
    pres2.setMedication(med2);
    pres2.setVisitID(1093);
    try {
        action.addPrescription(pres);
        action.addPrescription(pres2);
        fail("Should have thrown exception");
    } catch (PrescriptionWarningException e) {
        assertTrue(e.getDisplayMessage().contains("Interaction"));
    } catch (Exception e) {
        fail("Wrong exception thrown");
    }
}