/* HCP 9000000000 administered Hepatitis B immunization
to 6 patients between 12/31/2008 and 5/19/2009, who all
reported adverse events

Authenticate PHA
MID: 7000000001
Password: pw
Choose option Monitor Adverse Events
Choose date range 08/05/2000 through 10/17/2009
Choose to view adverse events
Select to view bar chart for Hepatitis B immunization (CPT Code: 90371)
 */
public void testGetBarChart() throws Exception {
    gen.adverseEvent3();
    // login pha
    WebConversation wc = login("7000000001", "pw");
    WebResponse wr = wc.getCurrentPage();
    assertEquals("iTrust - PHA Home", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 7000000001L, 0L, "");
    // click Monitor Adverse Events
    wr = wr.getLinkWith("Monitor Adverse Events").click();
    assertEquals("iTrust - Monitor Adverse Events", wr.getTitle());
    // choose date range
    WebForm form = wr.getForms()[0];
    form.getScriptableObject().setParameterValue("startDate", "08/05/2000");
    form.getScriptableObject().setParameterValue("endDate", "10/17/2009");
    form.getButtons()[3].click();
    wr = wc.getCurrentPage();
    WebTable wt = wr.getTableStartingWith("Immunization");
    assertTrue(((wt.getRowCount()) == 7));
    // view bar chart
    // form = wr.getForms()[0];
    wr = wr.getLinkWith("View Chart").click();
    assertTrue(wr.getText().contains("src="/iTrust/charts/"));
    iTrustHTTPTest.assertLogged(TransactionType.ADVERSE_EVENT_CHART_VIEW, 7000000001L, 0L, "");
}