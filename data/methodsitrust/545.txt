/**
 * Returns a list of diagnoses that are in the range indicated by the DiagnosisRange enum
 *
 * @return list of DiagnosisBeans
 * @throws iTrustException
 * 		
 */
public List<DiagnosisBean> getWarningDiagnoses() throws iTrustException {
    try {
        boolean dup = false;
        List<DiagnosisBean> allDiagnoses = patientDAO.getDiagnoses(this.pid);
        ArrayList<DiagnosisBean> warningList = new ArrayList<DiagnosisBean>();
        for (DiagnosisBean bean : allDiagnoses) {
            OfficeVisitBean ovb = ovDAO.getOfficeVisit(bean.getVisitID());
            if (ovb == null) {
                continue;
            }
            if (("yes".equals(bean.getClassification())) || ((ovb.getVisitDate().getTime()) > ((Calendar.getInstance().getTimeInMillis()) - ((((30 * 24) * 60) * 60) * 1000)))) {
                for (DiagnosisBean wbean : warningList) {
                    if (bean.getDescription().equals(wbean.getDescription())) {
                        dup = true;
                    }
                }
                if (!dup) {
                    warningList.add(bean);
                }
            }
        }
        return warningList;
    } catch (DBException dbe) {
        throw new iTrustException(dbe.getMessage());
    }
}