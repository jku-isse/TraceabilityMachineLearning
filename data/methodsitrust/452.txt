/**
 * Checks to see if the patient is allergic to the given prescription.
 *
 * @return A list of allergy warnings.  The list is empty if no allergies
were detected.
 * @throws iTrustException
 * 		
 * @throws PrescriptionWarningException
 * 		
 */
private List<String> checkAllergy(PrescriptionBean pres) throws PrescriptionWarningException, iTrustException {
    ArrayList<String> warnings = new ArrayList<String>();
    try {
        List<AllergyBean> allergyList = allergyDAO.getAllergies(getPid());
        MedicationBean medBean = pres.getMedication();
        if (medBean != null) {
            String newDrug = medBean.getNDCode();
            for (AllergyBean allergyBean : allergyList) {
                // Allergy: Aspirin. First Found: 12/20/2008.
                if (newDrug.equals(allergyBean.getNDCode())) {
                    warnings.add(formatAllergyWarning(allergyBean));
                }
            }
        }
    } catch (DBException e) {
        e.printStackTrace();
        throw new iTrustException(e.getMessage());
    }
    return warnings;
}