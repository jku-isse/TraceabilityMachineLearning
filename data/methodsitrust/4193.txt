/* HCP 9000000000 has viewed PHR of patient 2.
Authenticate Patient
MID: 2
Password: pw
Choose option View Access Log
 */
public void testViewAccessLog1() throws Exception {
    // clear operational profile
    gen.transactionLog();
    // hcp views phr of patient 2
    // login hcp
    WebConversation wc = login("9000000000", "pw");
    WebResponse wr = wc.getCurrentPage();
    assertEquals("iTrust - HCP Home", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 9000000000L, 0L, "");
    // click Edit PHR
    wr = wr.getLinkWith("PHR Information").click();
    assertEquals(((iTrustHTTPTest.ADDRESS) + "auth/getPatientID.jsp?forward=hcp-uap/editPHR.jsp"), wr.getURL().toString());
    // choose patient 2
    WebForm patientForm = wr.getForms()[0];
    patientForm.getScriptableObject().setParameterValue("UID_PATIENTID", "2");
    patientForm.getButtons()[1].click();
    wr = wc.getCurrentPage();
    assertEquals(((iTrustHTTPTest.ADDRESS) + "auth/hcp-uap/editPHR.jsp"), wr.getURL().toString());
    iTrustHTTPTest.assertLogged(TransactionType.PATIENT_HEALTH_INFORMATION_VIEW, 9000000000L, 2L, "");
    // login patient 2
    wc = login("2", "pw");
    wr = wc.getCurrentPage();
    assertEquals("iTrust - Patient Home", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 2L, 0L, "");
    // click on View Access Log
    wr = wr.getLinkWith("Access Log").click();
    // check the table that displays the access log
    WebTable table = wr.getTableStartingWithPrefix("Date");
    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date = new Date();
    assertTrue(table.getCellAsText(1, 0).contains(dateFormat.format(date)));
    assertEquals("Kelly Doctor", table.getCellAsText(1, 1));
    assertTrue(table.getCellAsText(1, 3).contains("View personal health information"));
    iTrustHTTPTest.assertLogged(TransactionType.ACCESS_LOG_VIEW, 2L, 0L, "");
}