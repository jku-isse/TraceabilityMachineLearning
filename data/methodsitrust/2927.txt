/**
 * Inserts a lab procedure into the database.
 *
 * @param b
 * 		The LabProcedureBean to be inserted.
 * @return A long containing the ID of the newly inserted lab procedure bean.
 * @throws DBException
 * 		
 */
public long addLabProcedure(LabProcedureBean b) throws DBException {
    Connection conn = null;
    PreparedStatement ps = null;
    try {
        if ((b.getPid()) == 0L)
            throw new SQLException("PatientMID cannot be null");

        conn = factory.getConnection();
        ps = conn.prepareStatement(("INSERT INTO labprocedure " + ((("(PatientMID, LaboratoryProcedureCode, Status, Commentary, " + "Results, OfficeVisitID, Rights, LabTechID, PriorityCode, ") + "NumericalResults, LowerBound, UpperBound) ") + "VALUES (?,?,?,?,?,?,?,?,?,?,?,?)")));
        ps.setLong(1, b.getPid());
        ps.setString(2, b.getLoinc());
        ps.setString(3, b.getStatus());
        ps.setString(4, b.getCommentary());
        ps.setString(5, b.getResults());
        ps.setLong(6, b.getOvID());
        ps.setString(7, b.getRights());
        ps.setLong(8, b.getLTID());
        ps.setInt(9, b.getPriorityCode());
        ps.setString(10, b.getNumericalResult());
        ps.setString(11, b.getLowerBound());
        ps.setString(12, b.getUpperBound());
        ps.executeUpdate();
        return DBUtil.getLastInsert(conn);
    } catch (SQLException e) {
        e.printStackTrace();
        throw new DBException(e);
    } finally {
        DBUtil.closeConnection(conn, ps);
    }
}