public void testListAllEmails() throws Exception {
    List<Email> emails = factory.getFakeEmailDAO().getAllEmails();
    assertEquals(4, emails.size());
    Email email = getTestEmail();
    new EmailUtil(factory).sendEmail(email);
    emails = factory.getFakeEmailDAO().getAllEmails();
    assertEquals(5, emails.size());
    assertEquals(getTestEmail(), emails.get(0));
}