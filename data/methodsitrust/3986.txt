public void testPatientSendReply() throws Exception {
    // Login
    WebConversation wc = login("2", "pw");
    WebResponse wr = wc.getCurrentPage();
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 2L, 0L, "");
    wr = wr.getLinkWith("Message Inbox").click();
    iTrustHTTPTest.assertLogged(TransactionType.INBOX_VIEW, 2L, 0L, "");
    wr = wr.getLinkWith("Read").click();
    iTrustHTTPTest.assertLogged(TransactionType.MESSAGE_VIEW, 2L, 9000000000L, "");
    // Message List
    wr = wr.getLinkWith("Reply").click();
    // Submit reply
    WebForm wf = wr.getFormWithID("mainForm");
    wf.getScriptableObject().setParameterValue("messageBody", "Which office visit did you update?");
    wr = wf.submit();
    iTrustHTTPTest.assertLogged(TransactionType.MESSAGE_SEND, 2L, 9000000000L, "");
    // Create timestamp
    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
    Date date = new Date();
    String stamp = dateFormat.format(date);
    // Check message in outbox
    wr = wr.getLinkWith("Message Outbox").click();
    assertTrue(wr.getText().contains("RE: Office Visit Updated"));
    assertTrue(wr.getText().contains("Kelly Doctor"));
    assertTrue(wr.getTableWithID("mailbox").getText().contains(stamp));
    iTrustHTTPTest.assertLogged(TransactionType.OUTBOX_VIEW, 2L, 0L, "");
    // Check bolded message appears in hcp
    wr = wr.getLinkWith("Logout").click();
    iTrustHTTPTest.assertLogged(TransactionType.LOGOUT, 2L, 2L, "");
    // wr = wr.getLinkWith("Log into iTrust").click();
    wc = login("9000000000", "pw");
    wr = wc.getCurrentPage();
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 9000000000L, 0L, "");
    wr = wr.getLinkWith("Message Inbox").click();
    iTrustHTTPTest.assertLogged(TransactionType.INBOX_VIEW, 9000000000L, 0L, "");
    assertEquals("font-weight: bold;", wr.getTableWithID("mailbox").getRows()[1].getAttribute("style"));
    assertTrue(wr.getTableWithID("mailbox").getRows()[1].getText().contains("Andy Programmer"));
    assertTrue(wr.getTableWithID("mailbox").getRows()[1].getText().contains("RE: Office Visit Updated"));
    assertTrue(wr.getTableWithID("mailbox").getRows()[1].getText().contains(stamp));
}