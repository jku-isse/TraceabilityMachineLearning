// /**
// *
// * Sends e-mail regarding the request to the patient.
// *
// * @param adminID admin who approved the request
// * @param hcpID HCP the request is for
// * @param pid ID of the patient the report is about
// * @return the sent e-mail
// * @throws DBException
// */
// private Email makeEmailView(long adminID, long hcpID, long pid) throws DBException {
// 
// PatientBean p = new PatientDAO(factory).getPatient(pid);
// 
// Email email = new Email();
// email.setFrom("no-reply@itrust.com");
// email.setToList(Arrays.asList(p.getEmail()));
// email.setSubject("A Report has been generated in iTrust");
// email
// .setBody(String
// .format(
// "Dear %s, 
 The iTrust Health Care Provider (%s) has chosen to view your full medical report, which was approved by an iTrust administrator (%s).  This report was only viewable one time and is no longer available.",
// p.getFullName(), hcpID, adminID));
// return email;
// }
/**
 * Gets the status of the request
 *
 * @param id
 * 		id of the request
 * @return the requests status
 * @throws iTrustException
 * 		
 */
public String getLongStatus(long id) throws iTrustException {
    StringBuilder s = new StringBuilder();
    ReportRequestBean r = reportRequestDAO.getReportRequest(id);
    if (r.getStatus().equals(ReportRequestBean.Requested)) {
        PersonnelBean p = personnelDAO.getPersonnel(r.getRequesterMID());
        s.append(String.format("Request was requested on %s by %s", r.getRequestedDateString(), p.getFullName()));
    }
    if (r.getStatus().equals(ReportRequestBean.Viewed)) {
        PersonnelBean p = personnelDAO.getPersonnel(r.getRequesterMID());
        String fullName = "Unknown";
        if (p != null) {
            fullName = p.getFullName();
            s.append(String.format("Request was requested on %s by %s, ", r.getRequestedDateString(), p.getFullName()));
        }
        s.append("");// removed "<br />" because it caused unit test to fail and seems to have no

        // purpose
        s.append(String.format("and viewed on %s by %s", r.getViewedDateString(), fullName));
    }
    return s.toString();
}