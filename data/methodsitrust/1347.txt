/**
 * Asserts whether the input is a valid, existing patients MID.
 *
 * @param input
 * 		The presumed MID
 * @return The existing patients ID as a long.
 * @throws iTrustException
 * 		If the patient does not exist or there is a DB Problem.
 */
private long checkPatientID(String input) throws iTrustException {
    try {
        long pid = Long.valueOf(input);
        if (factory.getPatientDAO().checkPatientExists(pid))
            return pid;
        else
            throw new iTrustException("Patient does not exist");

    } catch (NumberFormatException e) {
        throw new iTrustException(("Patient ID is not a number: " + (HtmlEncoder.encode(input))));
    }
}