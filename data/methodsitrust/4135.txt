public void testReport() throws Exception {
    WebConversation wc = login("1", "pw");
    WebResponse wr = wc.getCurrentPage();
    assertEquals("iTrust - Patient Home", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 1L, 0L, "");
    wr = wr.getLinkWith("View My Records").click();
    assertEquals("iTrust - View My Records", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.MEDICAL_RECORD_VIEW, 1L, 1L, "");
    WebLink[] weblinks = wr.getLinks();
    for (int i = 0; i < (weblinks.length); i++) {
        if (weblinks[i].getText().equals("Report")) {
            wr = weblinks[i].click();
            break;
        }
    }
    wr = wc.getCurrentPage();
    assertEquals("iTrust - Report Adverse Event", wr.getTitle());
    WebForm patientForm = wr.getFormWithID("mainForm");
    patientForm.getScriptableObject().setParameterValue("Comment", "Ive been experiencing extreme fatigue and severe nausea following this immunization.");
    wr = patientForm.submit();
    wr = wc.getCurrentPage();
    assertEquals("iTrust - Patient Home", wr.getTitle());
    assertTrue(wr.getText().contains("Adverse Event Successfully Reported"));
    iTrustHTTPTest.assertLogged(TransactionType.ADVERSE_EVENT_REPORT, 1L, 0L, "");
}