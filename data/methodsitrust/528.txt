/**
 * Send messages to the users associated with canceling a referral.
 *
 * @param bean
 * 		
 * @throws Exception
 * 		
 */
public void sendReferralCancelledMessages(ReferralBean bean) throws Exception {
    StringBuilder body = new StringBuilder();
    body.append((("The referral created on " + (bean.getTimeStamp())) + "has been deleted.

"));
    body.append("The referral is reproduced here for your convienence:
");
    body.append((((("Sending HCP: " + (personnelDAO.getName(bean.getSenderID()))) + " (") + (personnelDAO.getPersonnel(bean.getSenderID()).getSpecialty())) + ")
"));
    body.append((((("Receiving HCP: " + (personnelDAO.getName(bean.getReceiverID()))) + " (") + (personnelDAO.getPersonnel(bean.getReceiverID()).getSpecialty())) + ")
"));
    body.append((("Patient: " + (getPatientName(bean))) + "
"));
    body.append((("Notes: " + (bean.getReferralDetails())) + "
"));
    body.append((("Created on: " + (bean.getTimeStamp())) + "
"));
    MessageBean receiverMsg = new MessageBean();
    receiverMsg.setFrom(bean.getSenderID());
    receiverMsg.setTo(bean.getReceiverID());
    receiverMsg.setBody(body.toString());
    receiverMsg.setSubject("Your Referral Was Cancelled");
    receiverMsg.setRead(0);
    messageAction.sendMessage(receiverMsg);
    MessageBean patientMsg = new MessageBean();
    patientMsg.setFrom(bean.getSenderID());
    patientMsg.setTo(bean.getPatientID());
    patientMsg.setBody(body.toString());
    patientMsg.setSubject("Your Referral Was Cancelled");
    patientMsg.setRead(0);
    messageAction.sendMessage(patientMsg);
}