/**
 * Adds all the office visits for the logged in HCP to a list.
 *
 * @throws iTrustException
 * 		
 */
private void processOfficeVisits() throws iTrustException {
    try {
        List<PatientBean> plist = patientDAO.getAllPatients();
        for (PatientBean pb : plist) {
            // Create a new visit bean
            PatientVisitBean visitBean = new PatientVisitBean();
            // Add patients information to the visit
            visitBean.setPatient(pb);
            visitBean.setPatientName(pb.getFullName());
            visitBean.setAddress1((((pb.getStreetAddress1()) + " ") + (pb.getStreetAddress2())));
            visitBean.setAddress2((((((pb.getCity()) + " ") + (pb.getState())) + " ") + (pb.getZip())));
            // Get this patients office visit history
            List<OfficeVisitBean> ovlist = officevisitDAO.getAllOfficeVisits(pb.getMID());
            // If theyve had an office visit previously, get the date of the latest visit
            if (!(ovlist.isEmpty())) {
                // The list is ordered DESC, so the first entry will be the latest
                OfficeVisitBean ov = ovlist.get(0);
                String date = ov.getVisitDateStr();
                Scanner sc = new Scanner(date);
                sc.useDelimiter("/");
                String month = sc.next();
                String day = sc.next();
                String year = sc.next();
                visitBean.setLastOVDateM(month);
                visitBean.setLastOVDateD(day);
                visitBean.setLastOVDateY(year);
                visitBean.setLastOVDate(((((year + "-") + month) + "-") + date));
            } else {
                // The patient hasnt had an office visit, so set the date to null
                visitBean.setLastOVDateM(null);
                visitBean.setLastOVDateD(null);
                visitBean.setLastOVDateY(null);
                visitBean.setLastOVDate(null);
            }
            visits.add(visitBean);
        }
    } catch (DBException dbe) {
        throw new iTrustException(dbe.getMessage());
    }
}