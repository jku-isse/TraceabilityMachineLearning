/* HCP 9000000000 administered Hepatitis B immunization
to Patient 1 (on his 3/22/2009 Office Visit) 

Patient 1 has reported an Adverse Event for the 
Hepatitis B immunization (90371) on 5/19/2009 at 8:34AM 
with description ?A rash began spreading outward from the injection spot? 

Authenticate PHA
MID: 7000000001
Password: pw
Choose option Monitor Adverse Events
Choose date range 08/05/2000 through 10/17/2009
Choose to view adverse events
Select the 8/12/2007 Adverse Event Report by Random Person, 
for Hepatitis B immunization (CPT Code: 90371)
Remove adverse event report
 */
public void testRemoveImmunizationAdverseEventReport() throws Exception {
    gen.adverseEvent2();
    // login pha
    WebConversation wc = login("7000000001", "pw");
    WebResponse wr = wc.getCurrentPage();
    assertEquals("iTrust - PHA Home", wr.getTitle());
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 7000000001L, 0L, "");
    // click Monitor Adverse Events
    wr = wr.getLinkWith("Monitor Adverse Events").click();
    assertEquals("iTrust - Monitor Adverse Events", wr.getTitle());
    // choose date range
    WebForm form = wr.getForms()[0];
    form.getScriptableObject().setParameterValue("startDate", "08/05/2000");
    form.getScriptableObject().setParameterValue("endDate", "10/17/2009");
    form.getButtons()[3].click();
    wr = wc.getCurrentPage();
    assertTrue(wr.getText().contains("Hepatitis B(90371)"));
    // get details of report
    wr = wr.getLinkWith("Get Details").click();
    iTrustHTTPTest.assertLogged(TransactionType.ADVERSE_EVENT_VIEW, 7000000001L, 0L, "");
    assertTrue(wr.getText().contains("Random Person"));
    assertTrue(wr.getText().contains("Hepatitis B (90371)"));
    assertTrue(wr.getText().contains("2009-05-19 08:34:00.0"));
    assertTrue(wr.getText().contains("A rash began spreading outward from the injection spot"));
    // remove report
    form = wr.getForms()[0];
    form.getButtons()[0].click();
    wr = wc.getCurrentPage();
    assertTrue(wr.getText().contains("Report successfully removed"));
    iTrustHTTPTest.assertLogged(TransactionType.ADVERSE_EVENT_REMOVE, 7000000001L, 0L, "");
}