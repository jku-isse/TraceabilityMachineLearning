public void testValidPatient() throws Exception {
    WebConversation wc = login("9000000000", "pw");
    WebResponse wr = wc.getCurrentPage();
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, 9000000000L, 0L, "");
    wr = wc.getResponse(AddPatientTest.ADDRESS);
    WebForm patientForm = wr.getForms()[0];
    patientForm.setParameter("firstName", "John");
    patientForm.setParameter("lastName", "Doe");
    patientForm.setParameter("email", "john.doe@example.com");
    patientForm.getButtons()[0].click();
    wr = wc.getCurrentPage();
    assertTrue(wr.getText().contains("successfully added"));
    // Get the new patients MID and temporary password
    WebTable infoTable = wr.getTableStartingWith("New Patient Information");
    String mid = infoTable.getTableCell(1, 1).getText();
    String password = infoTable.getTableCell(2, 1).getText();
    // Ensure that we can login using the patients credentials
    wc = login(mid, password);
    iTrustHTTPTest.assertLogged(TransactionType.HOME_VIEW, new Integer(mid), 0L, "");
}