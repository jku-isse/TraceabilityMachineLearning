/**
 * Checks the prescription bean for interactions, allergies, and legal
 * values.
 *
 * @param pres
 * 		The prescription bean.
 * @throws iTrustException
 * 		
 */
private void checkForAllergiesAndInteractions(PrescriptionBean pres) throws iTrustException {
    List<String> warnings = checkInteraction(pres);
    warnings.addAll(checkAllergy(pres));
    if (!(warnings.isEmpty())) {
        PatientBean patient = patientDAO.getPatient(getPid());
        PersonnelBean hcp = personnelDAO.getPersonnel(getHcpid());
        loggingAction.logEvent(TransactionType.OVERRIDE_INTERACTION_WARNING, hcp.getMID(), patient.getMID(), (((pres.getMedication().getNDCode()) + " Override: ") + (pres.getReasons().toString())));
        if (validOverride(pres)) {
            emailUtil.sendEmail(makeEmail(pres, warnings));
        } else {
            throw new PrescriptionWarningException(warnings);
        }
    }
    if ("".equals(pres.getInstructions())) {
        throw new PrescriptionFieldException("Instructions are required.");
    }
}