/**
 * Creates and sends an e-mail about the change
 *
 * @param mid
 * 		the user whos password was changed
 * @param role
 * 		what role they have in iTrust
 * @return the e-mial that is sent
 * @throws DBException
 * 		
 */
private Email makeEmailApp(long mid, String role) throws DBException {
    if ((Role.parse(role)) == (Role.PATIENT)) {
        PatientBean p = new PatientDAO(factory).getPatient(mid);
        Email email = new Email();
        email.setFrom("no-reply@itrust.com");
        email.setToList(Arrays.asList(p.getEmail()));
        email.setSubject("Your password has been changed in iTrust");
        email.setBody(String.format("Dear %s, 
 You have chosen to change your iTrust password for user %s", p.getFullName(), mid));
        return email;
    } else {
        // UAP or HCP - admin taken out in "resetPassword"
        PersonnelBean p = new PersonnelDAO(factory).getPersonnel(mid);
        Email email = new Email();
        email.setFrom("no-reply@itrust.com");
        email.setToList(Arrays.asList(p.getEmail()));
        email.setSubject("Your password has been changed in iTrust");
        email.setBody(String.format("Dear %s, 
 You have chosen to change your iTrust password for user %s", p.getFullName(), mid));
        return email;
    }
}