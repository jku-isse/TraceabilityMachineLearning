public List<ApptBean> getNextAvailableAppts(int num, ApptBean bean) throws SQLException {
    List<ApptBean> appts = new ArrayList<ApptBean>(num);
    for (int i = 0; i < num; i++) {
        ApptBean b = new ApptBean();
        b.setApptType(bean.getApptType());
        b.setHcp(bean.getHcp());
        b.setPatient(bean.getPatient());
        b.setDate(new Timestamp(bean.getDate().getTime()));
        List<ApptBean> conflicts = null;
        do {
            conflicts = aDAO.getAllHCPConflictsForAppt(b.getHcp(), b);
            if ((conflicts != null) && (!(conflicts.isEmpty()))) {
                ApptBean lastConflict = conflicts.get(((conflicts.size()) - 1));
                Timestamp afterConflict = endTime(lastConflict);
                b.setDate(afterConflict);
            }
        } while ((conflicts != null) && (!(conflicts.isEmpty())) );
        appts.add(b);
        Timestamp nextTime = endTime(b);
        bean.setDate(nextTime);
    }
    return appts;
}