public void write() throws IOException {
    GPSaver saver = myParserFactory.newSaver();
    byte[] buffer;
    try {
        ByteArrayOutputStream bufferStream = new ByteArrayOutputStream();
        saver.save(bufferStream);
        bufferStream.flush();
        buffer = bufferStream.toByteArray();
    } catch (IOException e) {
        getUIFacade().showErrorDialog(e);
        return;
    }
    OutputStream output = getOutputStream();
    try {
        output.write(buffer);
        output.flush();
    } finally {
        output.close();
    }
}