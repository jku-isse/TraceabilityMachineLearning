private void recalculateActivities(List output, Date startDate, Date endDate) {
    GPCalendar calendar = myManager.getConfig().getCalendar();
    List activities = calendar.getActivities(startDate, endDate);
    output.clear();
    for (int i = 0; i < (activities.size()); i++) {
        GPCalendarActivity nextCalendarActivity = ((GPCalendarActivity) (activities.get(i)));
        TaskActivityImpl nextTaskActivity;
        if (nextCalendarActivity.isWorkingTime()) {
            nextTaskActivity = new TaskActivityImpl(this, nextCalendarActivity.getStart(), nextCalendarActivity.getEnd());
        } else
            if ((i > 0) && ((i + 1) < (activities.size()))) {
                nextTaskActivity = new TaskActivityImpl(this, nextCalendarActivity.getStart(), nextCalendarActivity.getEnd(), 0);
            } else {
                continue;
            }

        output.add(nextTaskActivity);
    }
}