protected void onFileChosen(File file) {
    String proposedExtension = myState.getExporter().proposeFileExtension();
    if (proposedExtension != null) {
        if (false == (file.getName().toLowerCase().endsWith(proposedExtension))) {
            file = new File((((file.getAbsolutePath()) + ".") + proposedExtension));
        }
    }
    myState.setFile(file);
}