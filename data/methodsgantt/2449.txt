public void setActive(boolean b) {
    if (b == false) {
        myState.setFile(getSelectedFile());
        FileChooserPage.ourLastSelectedFile = getSelectedFile();
        super.setActive(b);
    } else {
        super.setActive(b);
        File proposedFile = proposeOutputFile(myProject);
        if (proposedFile == null) {
            setSelectedFile(myState.getFile());
            return;
        }
        if (false == (proposedFile.equals(getSelectedFile()))) {
            setSelectedFile(proposedFile);
            myState.setFile(proposedFile);
        }
    }
}