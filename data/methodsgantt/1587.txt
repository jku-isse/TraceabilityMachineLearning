ChartModelBase.Offset[] calculateOffsets(TimeFrame timeFrame, TimeUnit frameBottomUnit, Date bottomUnitStartDate, TimeUnit offsetUnit, int frameBottomUnitWidth) {
    ChartModelBase.Offset[] result = null;
    CachingOffsetCalculatorImpl.UnitPair unitPair = new CachingOffsetCalculatorImpl.UnitPair(frameBottomUnit, offsetUnit);
    LinkedHashMap startDate_Offsets = ((LinkedHashMap) (myUnitPair_StartDate.get(unitPair)));
    if (startDate_Offsets == null) {
        startDate_Offsets = new LinkedHashMap();
        myUnitPair_StartDate.put(unitPair, startDate_Offsets);
    }
    result = ((ChartModelBase.Offset[]) (startDate_Offsets.get(bottomUnitStartDate)));
    if (result == null) {
        result = myCalculator.calculateOffsets(timeFrame, frameBottomUnit, bottomUnitStartDate, offsetUnit, frameBottomUnitWidth);
        startDate_Offsets.put(bottomUnitStartDate, result);
        if ((startDate_Offsets.size()) > (CachingOffsetCalculatorImpl.MAX_CACHE_SIZE)) {
            Iterator iter = startDate_Offsets.entrySet().iterator();
            iter.next();
            iter.remove();
        }
    }
    return result;
}