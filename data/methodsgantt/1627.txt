/**
 * Draws cells of the top line in the time line
 */
private void renderTopUnits() {
    int curX = 0;
    Date curDate = getChartModel().getStartDate();
    final int topUnitHeight = getChartModel().getChartUIConfiguration().getSpanningHeaderHeight();
    for (int i = 0; i < (getChartModel().getTopUnitOffsets().size()); i++) {
        ChartModelBase.Offset nextOffset = ((ChartModelBase.Offset) (getChartModel().getTopUnitOffsets().get(i)));
        TimeUnitText timeUnitText = nextOffset.getOffsetUnit().format(curDate);
        String unitText = timeUnitText.getText((-1));
        int posY = topUnitHeight - 5;
        GraphicPrimitiveContainer.Text text = myPrimitiveContainer.createText((curX + 2), posY, unitText);
        myPrimitiveContainer.bind(text, timeUnitText);
        text.setMaxLength(((nextOffset.getOffsetPixels()) - curX));
        text.setFont(getChartModel().getChartUIConfiguration().getSpanningHeaderFont());
        myPrimitiveContainer.createLine(curX, 0, curX, topUnitHeight);
        curX = nextOffset.getOffsetPixels();
        curDate = nextOffset.getOffsetEnd();
    }
}