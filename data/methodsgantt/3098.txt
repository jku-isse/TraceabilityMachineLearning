/**
 * Callback for the tree selection event.
 */
public void valueChanged(TreeSelectionEvent e) {
    if (reinit)
        return;

    DefaultMutableTreeNode node = ((DefaultMutableTreeNode) (e.getPath().getLastPathComponent()));
    boolean bHasChange = settingPanel.applyChanges(true);
    // construct the sections
    if (((settingPanel) instanceof LanguageSettingsPanel) && bHasChange) {
        reinit = true;
        rootNode.removeAllChildren();
        treeModel.setRoot(rootNode);
        treeModel.reload();
        constructSections();
        reinit = false;
    }
    // - remove the settingPanel
    mainPanel2.remove(0);
    Box vb = Box.createVerticalBox();
    Object userObject = node.getUserObject();
    if (userObject instanceof OptionPageProvider) {
        settingPanel = new OptionPageProviderPanel(((OptionPageProvider) (userObject)), getProject(), getUIFacade());
    } else {
        // - ask the settingPanel if parameters are changed
        // - Create the new panel
        String sNode = ((String) (node.getUserObject()));
        if (sNode.equals(language.getText("languages")))
            settingPanel = new LanguageSettingsPanel(appli);
        else
            if (sNode.equals(GanttProject.correctLabel(language.getText("project"))))
                settingPanel = new ProjectSettingsPanel(((Frame) (getOwner())), getProject());
            else
                if (sNode.equals(GanttProject.correctLabel(language.getText("parameters"))))
                    settingPanel = new ParametersSettingsPanel(appli);
                else
                    if (sNode.equals(GanttProject.correctLabel(language.getText("resourceRole"))))
                        settingPanel = new RolesSettingsPanel(appli);
                    else
                        if (sNode.equals(language.getText("looknfeel")))
                            settingPanel = new LnFSettingsPanel(appli);
                        else
                            if (sNode.equals(GanttProject.correctLabel(language.getText("export"))))
                                settingPanel = new ExportSettingsPanel(appli);
                            else
                                if (sNode.equals("csv"))
                                    settingPanel = new CSVSettingsPanel(appli);
                                else
                                    settingPanel = new WelcomeSettingsPanel(appli);







        vb.add(new TopPanel(("  " + (settingPanel.getTitle())), settingPanel.getComment()));
    }
    // - initialize the panel
    settingPanel.initialize();
    vb.add(settingPanel.getComponent());
    // - add the settingPanel into the main Panel
    mainPanel2.add(vb, 0);
    mainPanel2.repaint();
    mainPanel2.validate();// valide the changes

}