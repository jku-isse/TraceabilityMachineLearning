public int getUnitCount(TimeUnit unit) {
    TimeFrameImpl.LineHeader lineHeader = getLineHeader(unit);
    if (lineHeader == null) {
        lineHeader = new TimeFrameImpl.LineHeader(unit);
        // return getUnitCount(getLineHeader(), lineHeader,
        // getLineHeader().myFirstItem);
        fillLine(getLineHeader(), lineHeader);
        return lineHeader.getItemCount();
    }
    int result = (lineHeader == null) ? -1 : lineHeader.getItemCount();
    if (result == (-1)) {
        throw new RuntimeException((("There is not time unit=" + unit) + " in this time frame"));
    }
    return result;
}