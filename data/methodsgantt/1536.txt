public List getActivities(/* <GPCalendarActivity> */
Date startDate, final Date endDate) {
    if ((myWeekendDaysCount) == 0) {
        return myRestlessCalendar.getActivities(startDate, endDate);
    }
    List result = new ArrayList();
    Date curDayStart = myFramer.adjustLeft(startDate);
    boolean isWeekendState = isNonWorkingDay(curDayStart);
    // System.err.println("getActivities(): start="+startDate+"
    // end="+endDate);
    while (curDayStart.before(endDate)) {
        // System.err.println("curDayStart="+curDayStart);
        Date changeStateDayStart = getStateChangeDate(curDayStart, (!isWeekendState));
        // System.err.println("changeStateDayStart="+changeStateDayStart);
        if (changeStateDayStart.before(endDate)) {
            result.add(new CalendarActivityImpl(curDayStart, changeStateDayStart, (!isWeekendState)));
            curDayStart = changeStateDayStart;
            isWeekendState = !isWeekendState;
            continue;
        } else {
            result.add(new CalendarActivityImpl(curDayStart, endDate, (!isWeekendState)));
            break;
        }
    } 
    return result;
}