public static File appendSuffixBeforeExtension(File f, String suffix) throws IOException {
    String filename = f.getName();
    int i = filename.lastIndexOf(FileUtil.FILE_EXTENSION_SEPARATOR);
    File containingFolder = f.getParentFile();
    File result;
    if ((i > 0) && (i < ((filename.length()) - 1))) {
        String withoutExtension = filename.substring(0, i);
        String extension = filename.substring(i);
        result = new File(containingFolder, ((withoutExtension + suffix) + extension));
    } else {
        result = new File(containingFolder, (filename + suffix));
    }
    if (!(result.exists())) {
        result.createNewFile();
    }
    return result;
}