/**
 * Constructor.
 */
public GeneralDialog(GanttProject parent, String title, boolean modal, GeneralOptionPanel firstPanel) {
    super(parent, GanttProject.correctLabel(title), modal);
    appli = parent;
    // tree section.
    rootNode = new DefaultMutableTreeNode("Options");
    treeModel = new DefaultTreeModel(rootNode);
    treeSections = new JTree(treeModel);
    treeSections.setEditable(false);
    treeSections.setBackground(new Color(1.0F, 1.0F, 1.0F));
    treeSections.setShowsRootHandles(true);
    treeSections.setRowHeight(20);
    treeSections.setRootVisible(false);
    treeSections.setCellRenderer(new GeneralDialog.SettinsDefaultTreeCellRenderer());
    treeSections.addTreeSelectionListener(this);
    JScrollPane scrollpane = new JScrollPane(treeSections);
    JPanel treePanel = new JPanel();
    treePanel.add(scrollpane);
    JPanel mainPanel = new JPanel(new BorderLayout());
    if ((language.getComponentOrientation()) == (ComponentOrientation.LEFT_TO_RIGHT))
        mainPanel.add(treePanel, BorderLayout.WEST);
    else
        mainPanel.add(scrollpane, BorderLayout.EAST);

    scrollpane.setPreferredSize(new Dimension(150, 450));
    // construct the south panel
    southPanel = new JPanel(new FlowLayout(FlowLayout.TRAILING, 50, 10));
    okButton = new JButton(language.getText("ok"));
    okButton.addActionListener(this);
    southPanel.add(okButton);
    applyButton = new JButton(language.getText("apply"));
    applyButton.addActionListener(this);
    // southPanel.add(applyButton); //dont use the apply button
    cancelButton = new JButton(language.getText("cancel"));
    cancelButton.addActionListener(this);
    southPanel.add(cancelButton);
    southPanel.setPreferredSize(new Dimension(600, 50));
    Box southBox = Box.createVerticalBox();
    southBox.add(new JSeparator());
    southBox.add(southPanel);
    mainPanel.add(southBox, BorderLayout.SOUTH);
    // set the ok button as default action for enter
    if ((getRootPane()) != null)
        getRootPane().setDefaultButton(okButton);

    // add the main panel into the dialog
    JPanel tmpPanel = new JPanel(new BorderLayout());
    tmpPanel.add(mainPanel, BorderLayout.CENTER);
    getContentPane().add(tmpPanel);
    // construct the sections
    constructSections();
    settingPanel = firstPanel;
    Box vb = Box.createVerticalBox();
    vb.add(new TopPanel(("  " + (settingPanel.getTitle())), settingPanel.getComment()));
    vb.add(settingPanel);
    settingPanel.initialize();
    // - add the settingPanel into the main Panel
    mainPanel2.add(vb, 0);
    mainPanel.add(mainPanel2);
    // position the window
    this.pack();
    // setResizable(false);
    DialogAligner.center(this, getParent());
    applyComponentOrientation(language.getComponentOrientation());
}