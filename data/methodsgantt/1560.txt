public void setCalendars() throws Exception {
    // TODO The loading of the calendar is not clear. There are 2 cases here
    // :
    // - using eclipse where test is a directory
    // - using the built jar archive where test is not a directory
    // 
    // URL url = getClass().getResource("/calendar");
    // URL resolvedUrl = Platform.resolve(url);
    // File test = new File(resolvedUrl.getPath());
    // File path = new File(URLDecoder.decode(test.getAbsolutePath()));
    // if(test.isDirectory())
    // path = test;
    // else
    // path = new File("calendar");
    myCalendarResources.clear();
    XMLCalendarOpen.DefaultTagHandler th = ((XMLCalendarOpen.DefaultTagHandler) (getDefaultTagHandler()));
    addTagHandler(th);
    IConfigurationElement[] calendarExtensions = Platform.getExtensionRegistry().getConfigurationElementsFor(GPCalendar.EXTENSION_POINT_ID);
    // myCalendarFiles = path.listFiles(new Filter(".calendar"));
    myCalendarLabels = new String[calendarExtensions.length];
    for (int i = 0; i < (calendarExtensions.length); i++) {
        Bundle nextBundle = Platform.getBundle(calendarExtensions[i].getDeclaringExtension().getNamespace());
        URL calendarUrl = nextBundle.getResource(calendarExtensions[i].getAttribute("resource-url"));
        if (calendarUrl != null) {
            load(calendarUrl.openStream());
            myCalendarLabels[i] = th.getName();
            myCalendarResources.add(calendarUrl);
        }
    }
}