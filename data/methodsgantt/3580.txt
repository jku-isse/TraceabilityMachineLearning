public void setLocale(Locale locale) {
    currentLocale = locale;
    Locale.setDefault(locale);
    int defaultTimezoneOffset = (TimeZone.getDefault().getRawOffset()) + (TimeZone.getDefault().getDSTSavings());
    TimeZone utc = TimeZone.getTimeZone("UTC");
    utc.setRawOffset(defaultTimezoneOffset);
    TimeZone.setDefault(utc);
    currentDateFormat = ((SimpleDateFormat) (DateFormat.getDateInstance(DateFormat.MEDIUM, currentLocale)));
    shortCurrentDateFormat = ((SimpleDateFormat) (DateFormat.getDateInstance(DateFormat.SHORT, currentLocale)));
    currentTimeFormat = DateFormat.getTimeInstance(DateFormat.MEDIUM, currentLocale);
    myLongFormat = ((SimpleDateFormat) (DateFormat.getDateInstance(DateFormat.LONG, locale)));
    UIManager.put("JXDatePicker.longFormat", myLongFormat.toPattern());
    UIManager.put("JXDatePicker.mediumFormat", currentDateFormat.toPattern());
    UIManager.put("JXDatePicker.shortFormat", shortCurrentDateFormat.toPattern());
    UIManager.put("JXDatePicker.numColumns", new Integer(10));
    String[] dayShortNames = new String[7];
    for (int i = 0; i < 7; i++) {
        dayShortNames[i] = getDay(i).substring(0, 1);
    }
    UIManager.put("JXMonthView.daysOfTheWeek", dayShortNames);
    String resourceBase = System.getProperty("org.ganttproject.resourcebase", "language/i18n");
    i18n = ResourceBundle.getBundle(resourceBase, currentLocale);
    fireLanguageChanged();
}