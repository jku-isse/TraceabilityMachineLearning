protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    BufferedImage bufferImage = ((BufferedImage) (PrintPreview.PagePreview.ourImageCache.get(new Integer(myPageIndex))));
    if (bufferImage == null) {
        bufferImage = new BufferedImage(((int) (myPageFormat.getWidth())), ((int) (myPageFormat.getHeight())), BufferedImage.TYPE_INT_RGB);
        if ((PrintPreview.PagePreview.ourImageCache.size()) >= 4) {
            PrintPreview.PagePreview.ourImageCache.remove(PrintPreview.PagePreview.ourImageCache.firstKey());
        }
        PrintPreview.PagePreview.ourImageCache.put(new Integer(myPageIndex), bufferImage);
    }
    Graphics bufferGraphics = bufferImage.getGraphics();
    {
        bufferGraphics.setColor(Color.white);
        bufferGraphics.fillRect(0, 0, bufferImage.getWidth(), bufferImage.getHeight());
        try {
            myChart.print(bufferGraphics, myPageFormat, myPageIndex);
        } catch (PrinterException e) {
            if (!(GPLogger.log(e))) {
                e.printStackTrace(System.err);
            }
        }
    }
    Image scaledImage = bufferImage.getScaledInstance(getScaledWidth(), getScaledHeight(), Image.SCALE_SMOOTH);
    g.setColor(getBackground());
    g.fillRect(0, 0, getWidth(), getHeight());
    g.drawImage(scaledImage, 0, 0, null);
}