final void repaintBoard() {
    // removeAll();
    // Create a renderer for each chessboard square
    Position pos = new PositionImpl(0);// Avoid to create new position instances for each square

    for (int s = 0; s < 64; s++) {
        pos.setSquareIndex(s);
        Piece p = _board.getPiece(pos);
        _square[s] = (p != null) ? new PositionRenderer(new PieceRenderer(p.getColor(), p.getType(), _set, this)) : new PositionRenderer();
    }
    // Remove all the squares, in case this is a reset and the pieces layer already contains the
    // squares of an existing board.
    removeAll();
    // The order of the component adding is different then the order of the chessboard squares.
    // _square[0] = square a1 of the chessboard, but the components are added from the left
    // upper square (= a8)
    for (int s = 63; s >= 0; s--) {
        add(_square[((s & (~7)) + (7 - (s & 7)))]);
    }
    repaint();
}