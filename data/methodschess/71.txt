/**
 * Set a piece on a given square.
 *
 * @param piece
 * 		The piece to set, or null to empty the square.
 * @param position
 * 		The position of the square.
 */
public final void setPiece(Piece piece, Position position) {
    byte pieceCodeColor = (piece == null) ? 0 : piece.getTypeAndColor();
    long bitmask = 1L << (position.getSquareIndex());
    long bitFilter = ~bitmask;
    for (int i = 0; i < 4; i++) {
        if ((pieceCodeColor & 1) != 0) {
            _boardLayer[i] |= bitmask;// Set this bit to 1.

        } else {
            _boardLayer[i] &= bitFilter;// Set this bit to 0.

        }
        pieceCodeColor >>= 1;
    }
}