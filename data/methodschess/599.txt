/**
 * Create a position from a given square name (i.e. d4).
 *
 * @param squareName
 * 		The name of the square.
 * @throws IllegalPositionException
 * 		If the argument is not a valid square name.
 */
public PositionImpl(String squareName) throws IllegalPositionException {
    // -1 indicates an error here.
    int squareIndex = -1;
    // Trim and convert the name to lower case.
    squareName = squareName.trim().toLowerCase();
    // Check if the name has no extra characters
    if ((squareName.length()) != 2) {
        throw new IllegalPositionException();
    } else {
        // Get the line.
        char lineLetter = squareName.charAt(0);
        if ((lineLetter < a) || (lineLetter > h)) {
            throw new IllegalPositionException();
        } else {
            // Compute the index of the line.
            int lineIndex = lineLetter - a;
            // Get the name of the row.
            char rowLetter = squareName.charAt(1);
            if ((rowLetter < 1) || (rowLetter > 8)) {
                throw new IllegalPositionException();
            } else {
                int rowIndex = rowLetter - 1;
                // The square index is 8 * row + line.
                squareIndex = (rowIndex << 3) + lineIndex;
            }
        }
    }
    // Set the computed square index.
    setSquareIndex(squareIndex);
}